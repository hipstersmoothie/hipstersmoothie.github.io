<!DOCTYPE html><html><head><meta charSet="utf-8" class="next-head"/><link rel="preload" href="/_next/static/ZCLED0F09LQ8BAoVF9TeS/pages/blog/next-pages.js" as="script"/><link rel="preload" href="/_next/static/ZCLED0F09LQ8BAoVF9TeS/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/ZCLED0F09LQ8BAoVF9TeS/pages/_error.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-042fd1065dc091f35b5c.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9000cc5c5bacdca8b707.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-c25868fc02f41bb89815.js" as="script"/><div><style id="__jsx-757594817">.stats.jsx-757594817{margin:4em auto 0;}
.link.jsx-757594817 p.jsx-757594817+p.jsx-757594817:hover{color:#e8d0a9;}</style><style id="__jsx-2412815819">.content li{margin-top:0.25em;}
.header.jsx-2412815819{background:#6d929b !important;}
.name.jsx-2412815819{margin-bottom:2em;}
.tabs ul{margin:0 1rem;}</style><style id="__jsx-351074346">body a{color:#73b2d9;}</style><style id="__jsx-3237570666">strong{color:rgba(103,183,246,1) !important;}
pre .hljs{background:initial;}</style><style id="__jsx-69264733">.blogPost.full-blog-post{width:90%;}</style><style id="__jsx-1762840042">.authorImage.jsx-1762840042{border:3px solid #ccc;border-radius:50%;height:60px;left:50%;margin-left:-30px;position:absolute !important;top:-30px;width:60px;}.blogPost.jsx-1762840042{margin:auto auto 65px;max-width:800px;width:100%;margin-top:100px;}.blogTitle.jsx-1762840042{margin-top:1rem !important;margin-bottom:2.5rem;font-size:2rem;font-weight:lighter;line-height:2;line-height:2.5rem;}.blogSubtitle.jsx-1762840042{color:#909aa0;margin-bottom:2rem;}.blogHeader.jsx-1762840042{margin-top:2.5rem;}.blogBody.jsx-1762840042{line-height:1.4;margin:0 1rem 2rem;}@media screen and (min-width:769px){.blogBody.jsx-1762840042{margin:0 4rem 4rem;}}</style></div><div><style id="__jsx-757594817">.stats.jsx-757594817{margin:4em auto 0;}
.link.jsx-757594817 p.jsx-757594817+p.jsx-757594817:hover{color:#e8d0a9;}</style><style id="__jsx-2412815819">.content li{margin-top:0.25em;}
.header.jsx-2412815819{background:#6d929b !important;}
.name.jsx-2412815819{margin-bottom:2em;}
.tabs ul{margin:0 1rem;}</style><style id="__jsx-351074346">body a{color:#73b2d9;}</style><style id="__jsx-3237570666">strong{color:rgba(103,183,246,1) !important;}
pre .hljs{background:initial;}</style><style id="__jsx-69264733">.blogPost.full-blog-post{width:90%;}</style><style id="__jsx-1762840042">.authorImage.jsx-1762840042{border:3px solid #ccc;border-radius:50%;height:60px;left:50%;margin-left:-30px;position:absolute !important;top:-30px;width:60px;}.blogPost.jsx-1762840042{margin:auto auto 65px;max-width:800px;width:100%;margin-top:100px;}.blogTitle.jsx-1762840042{margin-top:1rem !important;margin-bottom:2.5rem;font-size:2rem;font-weight:lighter;line-height:2;line-height:2.5rem;}.blogSubtitle.jsx-1762840042{color:#909aa0;margin-bottom:2rem;}.blogHeader.jsx-1762840042{margin-top:2.5rem;}.blogBody.jsx-1762840042{line-height:1.4;margin:0 1rem 2rem;}@media screen and (min-width:769px){.blogBody.jsx-1762840042{margin:0 4rem 4rem;}}</style></div><meta name="viewport" content="initial-scale=1.0, width=device-width"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossOrigin="anonymous"/><link rel="stylesheet" href="https://jenil.github.io/bulmaswatch/default/bulmaswatch.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/foundation.min.css"/></head><body><div id="__next"><div class="jsx-351074346 is-fullhd"><section class="jsx-2412815819 hero is-dark header"><div class="jsx-2412815819 hero-body"><div class="jsx-2412815819 container has-text-centered"><div class="jsx-2412815819 level"><div class="jsx-2412815819 level-item"><figure style="width:150px" class="jsx-2412815819 image"><img src="https://avatars2.githubusercontent.com/u/1192452?s=400&amp;v=4" class="jsx-2412815819 is-rounded"/></figure></div></div><h1 class="jsx-2412815819 title name">Hi, I&#x27;m Andrew Lisowski</h1><div class="jsx-757594817 level stats is-mobile"><div class="jsx-757594817 level-item has-text-centered link"><div class="jsx-757594817"><p class="jsx-757594817 heading">GitHub</p><p class="jsx-757594817 title"><a href="https://github.com/hipstersmoothie" target="_blank" rel="noopener noreferrer" class="jsx-757594817"><i class="jsx-757594817 fab fa-github"></i></a></p></div></div><div class="jsx-757594817 level-item has-text-centered link"><div class="jsx-757594817"><p class="jsx-757594817 heading">Twitter</p><p class="jsx-757594817 title"><a href="https://twitter.com/HipsterSmoothie" target="_blank" rel="noopener noreferrer" class="jsx-757594817"><i class="jsx-757594817 fab fa-twitter"></i></a></p></div></div><div class="jsx-757594817 level-item has-text-centered link"><div class="jsx-757594817"><p class="jsx-757594817 heading">Email</p><p class="jsx-757594817 title"><a href="mailto:lisowski54@gmail.com" target="_blank" rel="noopener noreferrer" class="jsx-757594817"><i class="jsx-757594817 far fa-envelope"></i></a></p></div></div><div class="jsx-757594817 level-item has-text-centered link"><div class="jsx-757594817"><p class="jsx-757594817 heading">NPM</p><p class="jsx-757594817 title"><a href="https://www.npmjs.com/~alisowski" target="_blank" rel="noopener noreferrer" class="jsx-757594817"><i class="jsx-757594817 fab fa-npm"></i></a></p></div></div></div></div></div><div class="jsx-2412815819 hero-foot"><nav class="jsx-2412815819 tabs is-boxed is-fullwidth"><ul class="jsx-2412815819"><li class="jsx-2412815819 "><a href="/" class="jsx-2412815819">Overview</a></li><li class="jsx-2412815819 "><a class="jsx-2412815819" href="/projects/">Projects</a></li><li class="jsx-2412815819 is-active"><a class="jsx-2412815819" href="/blog/">Blog</a></li></ul></nav></div></section><article class="jsx-1762840042 card blogPost full-blog-post content"><div class="jsx-1762840042 card-content"><div class="jsx-1762840042 media blogHeader"><div class="jsx-1762840042 media-content has-text-centered"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&#x27;https://avatars2.githubusercontent.com/u/1192452?s=400&amp;v=4&#x27;)" class="jsx-1762840042 image authorImage"></div><h1 class="jsx-1762840042 title blogTitle">Using Next.js with Github Pages</h1><p class="jsx-1762840042 subtitle is-6 blogSubtitle"><a target="_blank" rel="noopener noreferrer" to="https://github.intuit.com/alisowski" href="https://github.intuit.com/alisowski" class="jsx-1762840042">Andrew Lisowski</a><span class="jsx-1762840042"> on <!-- -->October 25, 2018</span></p></div></div><div class="jsx-1762840042 blogBody"><div><p>Getting <code>next.js</code> to work on a domain at anything other than the root takes a little extra configuration. This post will walk you though the steps to get it up and running.</p><h2>Prefix Static Assets</h2><p>Github project pages urls are deployed to <code>https://your-username.github.io/your-project</code>. To get <code>next.js</code> to properly serve all of your assets (js, css, html) your must include a <code>assetPrefix</code> in your <code>next.config.js</code>.</p><pre><code class="hljs language-js" metaString=""><span class="hljs-keyword">const</span> debug = process.env.NODE_ENV !== <span class="hljs-string">&#x27;production&#x27;</span>;
<span class="hljs-keyword">const</span> assetPrefix = debug ? <span class="hljs-string">&#x27;&#x27;</span> : <span class="hljs-string">&#x27;/your_prefix/&#x27;</span>;

<span class="hljs-built_in">module</span>.exports = {
  assetPrefix
};</code></pre><p>Now you will find that when you deploy your project website to github pages all the static assets work, but if you try clicking anything using the <code>@next/link</code> component you&#x27;ll get a 404. If you have any pages with images served from the static folder you will also notice that they do not work either!</p><h2>Prefix URLs</h2><p>So it seems to get our github project page to work we&#x27;ll also need to all the URLs in our app to be prefixed. This includes both anchor <code>href</code>s and img <code>src</code>s. You could do this yourself, or you could install <a href="https://github.com/hipstersmoothie/next-prefixed"><code>next-prefixed</code></a> a package I published to address this issue.</p><h3>Configure</h3><p>First install <code>next-prefixed</code> and add the following to your <code>next.config.js</code>.</p><pre><code class="hljs language-js" metaString=""><span class="hljs-keyword">const</span> debug = process.env.NODE_ENV !== <span class="hljs-string">&#x27;production&#x27;</span>;
<span class="hljs-keyword">const</span> assetPrefix = debug ? <span class="hljs-string">&#x27;&#x27;</span> : <span class="hljs-string">&#x27;/your_prefix/&#x27;</span>;

<span class="hljs-built_in">module</span>.exports = withPlugins([withCSS, withMDX, withBlog], {
  assetPrefix,
  <span class="hljs-attr">publicRuntimeConfig</span>: {
    assetPrefix
  }
});</code></pre><p><code>publicRuntimeConfig</code> will expose the <code>assetPrefix</code> to our <code>next.js</code> app.</p><h3>Usage</h3><p>Now that you have fully configured your <code>assetPrefix</code> all thats left to do is switch out all <code>@next/link</code> components and <code>img</code> tags with the prefixed versions.</p><pre><code class="hljs language-js" metaString=""><span class="hljs-keyword">import</span> { Link, Image } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-prefixed&#x27;</span>;

<span class="hljs-keyword">const</span> Example = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    </span>&lt;Image src=&quot;/static/jimp.png&quot; alt=&#x27;Code example&#x27; /&gt;
    &lt;Link href=&quot;/blog&quot; /&gt;
  &lt;/div&gt;
);</code></pre><p>These components use <code>assetPrefix</code> to prefix all the URLs so they resolve in your github-pages app correctly. Now your project page links work!</p><h3>Manual Prefix</h3><p>If you need to manually prefix some URLs that aren&#x27;t covered by <code>next-prefixed</code>&#x27;s components, it also exports <code>prefixUrl</code>. This function simply joins the <code>assetPrefix</code> with whatever path is supplied to it.</p><pre><code class="hljs language-js" metaString=""><span class="hljs-keyword">import</span> { prefixURL } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-prefixed&#x27;</span>;

prefixURL(<span class="hljs-string">&#x27;/blog&#x27;</span>); <span class="hljs-comment">// =&gt; my_prefix/blog</span></code></pre><h1>All done!</h1><p>Now your github project page should work with <code>next.js</code> without a flaw!</p></div></div></div></article><footer class="footer"><div class="content has-text-centered"><p>Copyright (c) 2018 Andrew Lisowski. The source code is licensed under<!-- --> <a href="http://opensource.org/licenses/mit-license.php">MIT</a>.</p></div></footer></div></div><script>__NEXT_DATA__ = {"props":{"pageProps":{}},"page":"/blog/next-pages","query":{},"buildId":"ZCLED0F09LQ8BAoVF9TeS","nextExport":true};__NEXT_LOADED_PAGES__=[];__NEXT_REGISTER_PAGE=function(r,f){__NEXT_LOADED_PAGES__.push([r, f])}</script><script async="" id="__NEXT_PAGE__/blog/next-pages" src="/_next/static/ZCLED0F09LQ8BAoVF9TeS/pages/blog/next-pages.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/_next/static/ZCLED0F09LQ8BAoVF9TeS/pages/_app.js"></script><script async="" id="__NEXT_PAGE__/_error" src="/_next/static/ZCLED0F09LQ8BAoVF9TeS/pages/_error.js"></script><script src="/_next/static/runtime/webpack-042fd1065dc091f35b5c.js" async=""></script><script src="/_next/static/chunks/commons.9000cc5c5bacdca8b707.js" async=""></script><script src="/_next/static/runtime/main-c25868fc02f41bb89815.js" async=""></script></body></html>